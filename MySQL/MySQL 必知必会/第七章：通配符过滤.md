---
title: 第七章：通配符过滤 
lang: en-US
---

# 第七章： 通配符过滤 

以上的所有操作符都是针对已知值进行过滤的。不管是匹配一个还是多个值，测试大于还是小于已知值，或者检查某个范围的值，共同点是过滤中使用的值都是已知的。但是，这种过滤方法并不是任何时候都好用。

所以可以使用通配符进行过滤搜索，通配符可创建比较特定数据的搜索模式。

**通配符（wildcard）** 用来匹配值的一部分的特殊字符。

**搜索模式（search pattern）** 由字面值、通配符或两者组合构成的搜索条件。

> 通配符本身实际是SQL的WHERE子句中有特殊含义的字符
> 为在搜索子句中使用通配符，必须使用LIKE操作符。
> LIKE指示MySQL，后跟的搜索模式利用通配符匹配而不是直接相等匹配进行比较。

## 百分号（%）通配符

最常使用的通配符是百分号（%）。在搜索串中，%表示任何字符出现任意次数。

~~~mysql
SELECT xxx FROM xxx WHERE xxx LIKE "xx%";
~~~

匹配以‘xx’开头的字段信息

![image-20211015094949679](https://gitee.com/sue201982/mysql/raw/master/img/202110292227309.png)

通配符可在搜索模式中任意位置使用，并且可以使用多个通配符。下面的例子使用两个通配符，它们位于模式的两端：

~~~mysql
SELECT xxx FROM xxx WHERE xxx LIKE "%xx%";
~~~

表示匹配任何位置包含文本“xx”的值，而不论它之前或之后出现什么字符

![image-20211015101545810](https://gitee.com/sue201982/mysql/raw/master/img/202110292227310.png)

通配符也可以出现在搜索模式的中间，虽然这样做不太有用：

~~~mysql
SELECT xxx FROM xxx WHERE xxx LIKE "x%x";
~~~

表示匹配在x1和x2之间包含任意是数据

![image-20211015101920457](https://gitee.com/sue201982/mysql/raw/master/img/202110292227311.png)

> 重要的是要注意到，除了一个或多个字符外，%还能匹配0个字符。%代表搜索模式中给定位置的0个、1个或多个字符。
> 尾空格可能会干扰通配符匹配。
> 虽然似乎%通配符可以匹配任何东西，但有一个例外，即NULL。即使是WHERE prod_name LIKE '%'也不能匹配用值NULL作为产品名的行。

## 下划线（_）通配符

下划线的用途与%一样，但下划线只匹配单个字符而不是多个字符。

~~~mysql
SELECT xxx FROM xxx WHERE xxx LIKE "x_x";
~~~

注意：（ _ ）只能匹配一个字符，使用技巧和（ % ）一样。

![image-20211015102352770](https://gitee.com/sue201982/mysql/raw/master/img/202110292227312.png)

## 使用技巧

- 不要过度使用通配符。如果其他操作符能达到相同的目的，应该使用其他操作符。
- 在确实需要使用通配符时，除非绝对有必要，否则不要把它们用在搜索模式的开始处。把通配符置于搜索模式的开始处，搜索起来是最慢的。
- 仔细注意通配符的位置。如果放错地方，可能不会返回想要的数据。