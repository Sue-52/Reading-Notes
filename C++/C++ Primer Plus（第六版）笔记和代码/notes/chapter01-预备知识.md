---
title: chapter01-Propaedeutics C++
date: 2022-05-02 21:30:00
categories:
  - C++
tags:
  - C++
---

## chapter01-Propaedeutics C++ -- 预备知识

### C++ 简介

`C++` 的三种不同编程方式：

1. 过程性语言
2. 添加了类的面向对象语言
3. 泛型编程

利用了面向对象特性提供了基本类型、运算符、控制结构和语法规则等。

### C++ 简史

> 目标：
>
> 1. C 语言
> 2. C 语言编程原理
> 3. 面向对象编程
> 4. C++ 和 泛型编程
> 5. C++ 起源

在 20 世纪 70 年代，C 和 Pascal 语言进入了结构化编程的路程。除了提供结构化编程工具外，C 还能生成简洁、快速运行的程序，并提供了处理硬件问题的能力，如：管理通信端口、磁盘驱动器等。

到了 20 世纪 80 年代，编程模式成长到了：面向对象编程（OOP（*Object-oriented programming*））

#### 1. C 语言

贝尔实验室的 Dennis Ritchie 致力于开发 UNIX 操作系统。为了用一种语言：简介、快速并有效的控制硬件而开发的。

传统上 **汇编语言** 依赖于计算机内部机器语言，但是其组要目的用于操作机器的硬件，如果要进行语言的一直，那么在不同机器都需要使用不同的汇编语言。

高级语言（high-level）一种被称为编译器的特殊程序将其转换为机器内部语言，并且不同平台使用不同编译器可以转换为同一个方式。

#### 2. C 语言编程原理

计算机语言处理程序的概念为：

- 数据：处理的信息
- 算法：处理的方法

![image-20220502203539039](https://raw.githubusercontent.com/Sue-52/PicGo/main/images/image-20220502203539039.png)

过程化编程首先确定计算机应采取的操作，然后使用编程语言实现。通过程序按一系列流程生成特定结果。

而 C 语言具有的结构化特性如：for循环、while循环、if...else判断等。

另一个新原则是自顶向下（Top-down）的设计：将大型任务逐步分解成小型任务后在进行解决。

#### 3. 面向对象编程

理念：

- 代码清晰度
- 可靠行
- 便于维护

主要强调的是数据。

OOP编程不仅仅是将数据和方法合并为类定义。如：创建可重用代码、信息隐藏可以保护数据，避免不适当访问、多态定义为运算符和函数创建多个定义、继承能够使用旧类派生出的新类。

#### 4. C++ 和泛型编程

泛型编程（generic programming）C++的另一种编程模式。注重独立于特定数据类型。如果说OOP适合于大型项目的管理与开发，那么泛型编程提供了执行常见任务的工具，如：数据排序、合并链表等。

术语泛型（generic）指的是创建独立于类型的代码。

#### 5. C++ 起源

Bjarne Stroustrup 在 20世纪 80 年代开发的语言。

C++ 是对 C 语言的扩展。

![image-20220502210423105](https://raw.githubusercontent.com/Sue-52/PicGo/main/images/image-20220502210423105.png)

### 可移植性和标准

可移植性指的是在不修改代码的情况下，在不同的计算机中进行重编译并且程序能够运行良好，那么可以判定程序为可移植的。

> 目标：
>
> 1. C++ 的发展
> 2. C++ 标准

#### 1. C++ 的发展

Stroustrup 编写的 《The Programming Language》中包含了 65 页的参考书，并成为了 C++ 事实标准。

#### 2. C++ 标准

遵循了 C++98，并覆盖了 C++11 新增特性

### 程序创建的技巧

程序的运行过程：

1. 通过文件编写并保存，那么该文件为源代码
2. 编译源代码，将源代码转换为机器语言为程序的运行
3. 将目标代码和其他台吗链接起来，如：常用库等。执行结果为程序结束

![image-20220502211147300](https://raw.githubusercontent.com/Sue-52/PicGo/main/images/image-20220502211147300.png)

> 目标：
>
> 1. 创建源代码文件
> 2. 编译和链接

#### 1. 创建源代码文件

![image-20220502211254366](https://raw.githubusercontent.com/Sue-52/PicGo/main/images/image-20220502211254366.png)

以上图为 C++ 源文件定义的方式。

|        C++实现         |  源代码文件的扩展名   |
| :--------------------: | :-------------------: |
|          UNIX          |     C、cc、cxx、c     |
|        GNU C++         | C、cc、cxx、cpp、c++  |
|      Digital Mars      |       cpp、cxx        |
|      Borland C++       |          cpp          |
|         Watcom         |          cpp          |
|  Micorsoft Visual C++  |     cpp、cxx、cc      |
| Freestyle Code Warrior | cp、cpp、cc、cxx、c++ |

不同机器中使用不同的扩展名

#### 2. 编译和链接

Stroustrup 实现 C++ 时，使用了一个 C++ 到 C 的编译器程序，而不是直接的 C++ 到目标代码的编译器。通过向 C 的领域引入 C++ 的过程。随着语言的热门也出现了越来越多的C++编译器

> 目标：
>
> 1. UNIX 编译和链接
> 2. Linux 编译和链接
> 3. Windows 命令行编译器
> 4. Windows 编译器
> 5. Macintosh 上的 C++

##### 1. UNIX 编译和链接

最初，UNIX 命令 CC 调用cfront，但 cfront 未能紧跟 C++ 的发展步伐，其最后一个版本发布于1993年。当今的 UNIX 计算机可能没有编译器、有专用编译器或第三方编译器，这些编译器可能是商业的，也可能是自由软件，如 GNU g++ 编译器。如果 UNIX 计算机上有 C++ 编译器，很多情况下命令 CC 仍然管用，只是启动的编译器随系统而异。出于简化的目的，读者应假设命令 CC 可用，但必须认识到这一点，即对于下述讨论中的 CC，可能必须使用其他命令来代替。

请用 CC 命令来编译程序。名称采用大写字母，这样可以将它与标准 UNIX C 编译器 cc 区分开来。CC 编译器是命令行编译器，这意味着需要在 UNIX 命令行上输入编译命令。

例如：要编译 C++ 源代码文件 spiffy.C，则应在UNIX提示符下输入如下命令：

~~~bash
CC spiffy.C
~~~

如果由于技巧、努力或是幸运的因素，程序没有错误，编译器将生成一个扩展名为 o 的目标代码文件。在这个例子中，编译器将生成文件spiffy.o。

接下来，编译器自动将目标代码文件传递给系统链接程序，该程序将代码与库代码结合起来，生成一个可执行文件。在默认情况下，可执行文件为 a.out 。如果只使用一个源文件，链接程序还将删除 spiffy.o 文件，因为这个文件不再需要了。要运行该程序，只要输入可执行文件的文件名即可：

~~~bash
a.out
~~~

注意，如果编译新程序，新的可执行文件 a.out 将覆盖已有的 a.out（这是因为可执行文件占据了大量空间，因此覆盖旧的可执行文件有助于降低存储需求）。然而，如果想保留可执行文件，只需使用UNX的mv命令来修改可执行文件的文件名即可。

与在C语言中一样，在C++中，程序也可以包含多个文件。

在这种情况下，可以通过在命令行上列出全部文件来编译程序：

~~~bash
CC my.C precious.C
~~~

如果有多个源代码文件，则编译器将不会删除目标代码文件。这样，如果只修改了 my.C 文件，则可以用下面的命令重新编译该程序：

~~~bash
CC my.C percious.o
~~~

这将重新编译 my.C 文件，并将它与前面编译的 precious.o 文件链接起来。

可能需要显式地指定一些库。例如，要访问数学库中定义的函数，必须在命令行中加上 -lm 标记：

~~~bash
CC usingmath.C -lm
~~~

##### 2. Linux 编译和链接

Linux系统中最常用的编译器 是g++，这是来自 Free Software Foundation 的GNU C++ 编译器。Linux 的多数版本都包括该编译器，但并不一定总会安装它。 g++ 编译器的工作方式很像标准UNX编译器。

例如，下面的命令将生成可执行文件a.out

~~~bash
g++ spiffy.cxx
~~~

有些版本可能要求链接C++库：

~~~bash
g++ spiffy.cxx -lg++
~~~

要编译多个源文件，只需将它们全部放到命令行中即可：

g++my.cxx precious.cxx

这将生成一个名为 a.out 的可执行文件和两个目标代码文件 my.o 和 precious.o。如果接下来修改了其中的某个源代码文件，如：mu.cxx，则可以使用 my.cxx 和precious.o 来重新编译：

~~~bash
g++ my.cxx precious.o
~~~

GNU 编译器可以在很多平台上使用，包括基于 Windows 的 PC 和在各种平台上运行的 UNIX 系统。

##### 3. Windows 命令行编译器

要在 Windows PC 上编译 C++ 程序，最便宜的方法是下载一个在 Windows 命令提示符模式（在这种模式下，将打开一个类似于 MS-DOS 的窗口）下运行的免费命令行编译器。Cygwin 和 MinGW 都包含编译器 GNU C++，且可免费下载：它们使用的编译器名为 g++。

要使用 g++ 编译器，首先需要打开一个命令提示符窗口。启动程序 Cygwin 和 MinGW 时，它们将自动为您打开一个命令提示符窗口。要编译名为 great.cpp 的源代码文件，请在提示符下输入如下命令：

~~~bash
g++ great.cpp
~~~

如果程序编译成功，则得到的可执行文件名为 a.exe。

##### 4. Windows 编译器

目前主流编译器为 Microsoft Visual C++ 2022。

通常，必须为程序创建一个项目，并将组成程序的一个或多个文件添加到该项目中。每个厂商提供的IDE（集成开发环境）都包含用于创建项目的菜单选项（可能还有自动帮助）。必须确定的非常重要的一点是，需要创建的是什么类型的程序。通常，编译器提供了很多选择，如 Windows 应用程序、MFC Windows 应用程序、动态链接库、ActiveX 控件、DOS 或字符模式的可执行文件、静态库或控制台应用程序等。其中一些可能既有32位版本，又有64位版本。

由于本书的程序都是通用的，因此应当避免要求平台特定代码的选项，如 Windows 应用程序。相反，应让程序以字符模式运行。具体选项取决于编译器。一般而言，应选择包含字样“控制台”、“字符模式” 或 “DOS可执行文件 ”等选项。例如，在 Microsoft Visual C++2022 中，应选择 Win32 Console Application
（控制台应用程序）选项，单击 Application Settings（应用程序设置），并选择Empty Project（空项目）。在 C++Builder 中，应从 C++Builder Projects（C+Builder项目）中选择Console Application（控制台应用程序）。

创建好项目后，需要对程序进行编译和链接。IDE通常提供了多个菜单项，如Compile（编译）、Build（建立）、Make（生成）、Build All（全部建立）、Link（链接）、Execute（执行）、Run（运行）和 Debug（调试），不过同一个IDE中，不一定包含所有这些选项。

- Compile 通常意味着对当前打开的文件中的代码进行编译。
- Build 和 Make 通常意味着编译项目中所有源代码文件的代码。这通常是一个递增过程，也就是说，如果项目包含3个文件，而只有其中一个文件被修改，则只重新编译该文件。
- Build All 通常意味着重新编译所有的源代码文件。
- Link意味着（如前所述）将编译后的源代码与所需的库代码组合起来。
- Run 或 Execute 意味着运行程序。通常，如果您还没有执行前面的步骤，Run将在运行程序之前完成这些步骤。
- Debug 意味着以步进方式执行程序。
- 编译器可能让您选择要生成调试版还是发布版。调试版包含额外的代码，这会增大程序、降低执行速度，但可提供详细的调试信息。

##### 5. Macintosh 上的 C++

当前，Apple随操作系统 Mac OS X 提供了开发框架 Xcode，该框架是免费的，但通常不会自动安装。要安装它，可使用操作系统安装盘，也可从 Apple 网站免费下载（但需要注意的是，它超过4GB）。Xcode 不仅提供了支持多种语言的IDE，还自带了两个命令行编译器（g++和clang），可在UNX模式下运行它们。
而要进入UNIX模式，可通过实用程序Terminal。.